---
title: การวาดรูปหลายเหลี่ยม
description: คลิกเพื่อเพิ่มจุด ดับเบิลคลิกเพื่อสร้างรูปหลายเหลี่ยม
---

คลิกเพื่อเพิ่มจุด ดับเบิลคลิกเพื่อสร้างรูปหลายเหลี่ยม:

<DrawingDemo />

```tsx tab="Component" lineNumbers
import { useState } from 'react';
import { SphereProvider, SphereMap, Polygon, Marker, type Location } from 'gistda-sphere-react';

function App() {
  const [points, setPoints] = useState<Location[]>([]);
  const [polygons, setPolygons] = useState<Location[][]>([]);

  const handleDoubleClick = () => {
    if (points.length >= 3) {
      setPolygons([...polygons, points]);
      setPoints([]);
    }
  };

  return (
    <SphereProvider apiKey="YOUR_API_KEY">
      <SphereMap
        center={{ lon: 100.5, lat: 13.75 }}
        zoom={10}
        style={{ height: '500px' }}
        onClick={(location) => setPoints([...points, location])}
        onDoubleClick={handleDoubleClick}
      >
        {polygons.map((positions) => (
          <Polygon
            key={positions.map((p) => `${p.lon},${p.lat}`).join('|')}
            positions={positions}
            fillColor="rgba(255,0,0,0.3)"
            lineColor="red"
          />
        ))}
        {points.map((pos) => (
          <Marker key={`${pos.lon}-${pos.lat}`} position={pos} />
        ))}
      </SphereMap>
    </SphereProvider>
  );
}
```

```tsx tab="Hook" lineNumbers
import { useState } from 'react';
import {
  SphereProvider, SphereMap, Polygon, Marker,
  usePolygons, useMapEvent, type Location,
} from 'gistda-sphere-react';

function PolygonDrawer() {
  const [points, setPoints] = useState<Location[]>([]);
  const { items: polygons, add, clear } = usePolygons();

  useMapEvent('click', (location) => {
    setPoints((prev) => [...prev, location]);
  });

  const handleDoubleClick = () => {
    if (points.length >= 3) {
      add({ positions: points, fillColor: 'rgba(255,0,0,0.3)', lineColor: 'red' });
      setPoints([]);
    }
  };

  return (
    <>
      <button onClick={clear}>ล้างรูปหลายเหลี่ยม</button>
      {polygons.map((p) => (
        <Polygon
          key={p.id}
          positions={p.positions}
          fillColor={p.fillColor}
          lineColor={p.lineColor}
        />
      ))}
      {points.map((pos) => (
        <Marker key={`${pos.lon}-${pos.lat}`} position={pos} />
      ))}
    </>
  );
}

function App() {
  return (
    <SphereProvider apiKey="YOUR_API_KEY">
      <SphereMap
        center={{ lon: 100.5, lat: 13.75 }}
        zoom={10}
        style={{ height: '500px' }}
        onDoubleClick={() => {/* จัดการใน PolygonDrawer */}}
      >
        <PolygonDrawer />
      </SphereMap>
    </SphereProvider>
  );
}
```
